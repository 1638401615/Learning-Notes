## 消息队列-Kafka

![image-20230207193444538](笔记图片/image-20230207193444538.png)

* 不同partition可以并发处理，提高吞吐量

![image-20230207193638875](笔记图片/image-20230207193638875.png)

* 每个partition有不同副本，存储在不同集群，用于容灾，分为leader和follower，和leader差距太多的follower会被从ISR踢出

![image-20230207193807905](笔记图片/image-20230207193807905.png)

![image-20230207193959367](笔记图片/image-20230207193959367.png)

* borker写入磁盘采用顺序写，避免寻道时间，提升写入效 率

![image-20230207200606452](笔记图片/image-20230207200606452.png)

### Kafka缺点

#### 数据复制时间成本问题

![image-20230207200915265](笔记图片/image-20230207200915265.png)

* 为什么要回切？

  保证负载均衡，否则可能所有的leader最后都到了一个borker

* 为什么只能一台台重启

  避免所有partition都被重启，导致对应topic都不可用了

#### 负载不均衡

![image-20230207201451363](笔记图片/image-20230207201451363.png)



## 消息队列-BMQ

![image-20230207203229870](笔记图片/image-20230207203229870.png)

![image-20230207203301758](笔记图片/image-20230207203301758.png)



## 消息队列-RocketMQ

