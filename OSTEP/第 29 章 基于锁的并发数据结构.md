## 并发计数器

> 完美扩展：多处理上运行的多线程像单线程一样快

* 可扩展的计数：

懒惰计数器——一个全局计数器+多个局部计数器

每个CPU核心都有一个局部计数器和局部锁，一个核心上线程想增加计数器，就加在它的局部计数器上，故不同CPU上的线程不会竞争，局部计数器的值会定期转移给全局计数器，然后局部计数器清零。局部转全局的频度，取决于一个阈值S。S小则扩展性差，懒惰计数器趋近于非扩展计数器，S大则扩展性强，但懒惰计数器与实际计数的偏差较大。

## 并发链表

* 增加链表并发的技术：过手锁/锁耦合

每个节点都有一个锁，替代之前一整个表一个锁。遍历链表的时候，首先抢占下一个节点的锁，然后释放当前节点的锁。实际情况中，每个节点获取和释放锁的开销太大，很难比单锁快。

## 并发队列

在队列头和尾各加一个锁，使得入队和出队操作可以并行执行。

## 并发散列表

每个散列桶（每个桶都是一个链表）都有一个锁，而不是整个散列表一个锁，从而支持并发操作。

