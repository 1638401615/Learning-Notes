## 标准协议

1. 轮询，操作系统反复读取状态寄存器，等待设备可以进入接收命令的就绪状态
2. 操作系统下发数据到数据寄存器
3. 操作系统将命令写入命令寄存器，设备开始执行命令
4. 轮询判断设备是否完成指令。

## 利用中断减少CPU开销

* 中断适用于处理速度较慢的设备，高速设备中额外的中断处理和上下文切换代价超过其收益
* 设备处理速度未知，最好选择**混合策略**，先轮询一小段时间，还未完成就中断
* **最好不要在网络中中断**。网络端收到大量数据包，如果每一个包都发 生一次中断，那么有可能导致操作系统发生活锁（livelock），即不断处理中断而无法处理用户层的请求。
* 基于中断的优化：**合并**。设备在抛出中断之前往往会等待一小段 时间，在此期间，其他请求可能很快完成，因此多次中断可以合并为一次中断抛出，从而 降低处理中断的代价。当然，等待太长会增加请求的延迟，这是系统中常见的折中。

## 利用DMA进行更高效的数据传送

* DMA引擎是系统中一个特殊设备，可以协调和完成内存和设备（如磁盘）间的数据传递，**不需要CPU介入**，CPU就能去干别的事情。

## 设备交互的方法

1. 使用明确I/O指令
2. 内存映射I/O

## 设备驱动程序

在最底层，操作系统的一部分软件清楚地知道设备如何工作，我们将这部分软件称为**设备驱动程序（device driver）**，所 有设备交互的细节都封装在其中。

不足：如果有一个设备可以提供很多特殊的功能， 但为了兼容大多数操作系统它不得不提供一个通用的接口，这样就使得自身的特殊功能无法使用

* 所有需要插入系统的设备都需要安装对应的驱动程序