## 两种类型的单块故障：

1. 潜在扇区错误

   eg：磁头由于某种原因接触到表面，使得数据位不可读

   驱动器可用磁盘内纠错码来检查块中磁盘位是否良好，能修修，不能修请求访问就返回错误。

2. 块讹误

   磁盘本身无法检测到的错误，eg：有缺陷的磁盘将块写入错误的位置

## 处理潜在的扇区错误

* 利用具有的**冗余机制**返回正确数据

## 检测讹误：校验和

常见校验和函数：

* 异或校验：每个校验和单元内相同位置两个位发生变化无法检测
* 加法校验：难以检测数据移位
* Fletcher 校验和
* 循环冗余检验CRC：将**待检验数据块视为一个大整数**，除以约定值k，其余部分为CRC值

校验和布局：

* 为每个扇区存校验和，不好写入
* n 个校验和一起存储在一个扇区中

处理错误写入：校验和中添加**物理标识符**，如磁盘号，扇区偏移量

处理丢失写入：执行**写入验证**或**写入后读取**