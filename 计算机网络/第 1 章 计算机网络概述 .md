# 1.1 网络基本概念

* 协议三要素：
  * 语法：实体间交换报文的**格式**
  * 语义：报文的意义和发送与接收报文所采取的**动作**
  * 时序：报文交换的**次序**

# 1.2 计算机网络结构

* 网络边缘：主机（客户机，服务器）
* 接入网络，物理介质：有线或无线通信链路
* 网络核心：
  * 互联的路由器/分组转发设备
  * 网络之网络

## 网络边缘

* 客户/服务器（C/S）应用模型（只能客户端和服务器通信）
* 对等（P2P）应用模型（无专用服务器，通信在**对等**实体间进行）
* 混合模型

## 接入网络

>  网络中带宽含义：数据传输速率 
>
>  集线器工作在物理层，交换机工作在链路层，路由器工作在网络层

端系统接入网络的方式：

1. 点对点
2. 以太网/WiFi
3. 广域无线

* DSL:用**电话线**实现话音和数据信号传输，点对点接入

  有线以太网接入：端系统通过双绞线连接到以太网，以太网连接到边缘路由器

* 电缆网络：用**有线电视电缆**传输数据和电视信号

* 无线接入网络

  WiFi接入：端系统接入WiFi（无线局域网）,wifi通过基站（无线接入点）接到边缘路由器

## 网络核心

* 网络核心关键功能：**路由+转发**

> 路由（routing）：确定分组从源到目的传输路径
>
> 转发（forwarding）：将分组从路由器的输入端口交换至正确的输出端口

#### 数据交换类型

* 电路交换（eg：电话网络）

  <img src=".\笔记图片\电路交换三阶段.jpg" style="zoom:80%;" />

  > 多路复用技术：实现信道共享的技术，把链路/网络资源分配为“资源片”，每路呼叫**独占**分配到的资源片。
  >
  > * 频分多路复用FDM（根据频率不同划分频带）
  > * 时分多路复用TDM（在时间上复用）
  > * 波分多路复用WDM（光的频分复用）
  > * 码分多路复用CDM（给每个用户分配唯一 m bit码片序列，各用户码片序列**正交**）编码信号=原始数据*码片序列 

* 报文交换

  报文：源（应用）发送信息整体

* 分组交换

  分组：报文拆出来的一系列相对较小的数据包

  存储转发传输：交换机能够开始向输岀链路传输该分组的第一个比特之前，必须接收到整个分组

   **分组交换用到统计多路复用（一种按需共享链路的多路复用）**

* 分组交换 vs 电路交换

  相同条件下，分组交换允许更多用户同时使用网络，

  当用户数较少的时候，分组交换能获得比电路交换更好的性能
  
  但不是绝对优于电路交换：
  
  * 分组交换适用于**突发**数据传输网络。
  * 分组交换可能产生**拥塞**：分组延迟和丢失
  * 各分组需要携带一定的控制信息，带来**额外开销**
  * 分组交换网的管理和控制比较复杂
  * 分组在存储转发的时候要排队造成一定时延，通信量过大的时候，时延可能会很大
  
  总结：**连续传输大量数据**，选择电路交换；**传送突发数据**，选择分组交换

## Internet结构

<img src=".\笔记图片\Internet结构.jpg" style="zoom:80%;" />

# 1.4 计算机网络性能

带宽：原本指信号具有的频带宽度，即最高频率和最低频率之差，单位赫兹（HZ）；

网络的带宽：数字信道所能传送的**“最高速率”**，单位：b/s（bps）

## 四种分组延迟

* 结点处理延迟
* 排队延迟
* 传输延迟
* 传播延迟

<img src=".\笔记图片\四种延迟.jpg" style="zoom:80%;" />

时延带宽积 = 传播时延 * 带宽（以比特为单位的链路长度）

抖动：最大时延和最小时延之差，描述了网络的稳定性

## 分组丢包

丢包原因：

1. 排队队列长度太大，超出缓存容量
2. 目的地址出错，只能按照默认路由转发，可能在路由形成回路等从而无法到达目的地址
3. 检测出差错，直接丢弃

丢包率 = 丢包数/分组总数

## 吞吐量/率

吞吐量：表示在**发送端与接受端之间**传送数据速率（b/s）

吞吐量取决于瓶颈链路（最小带宽的链路）

# 1.5 计算机网络体系结构

## 网络体系结构概念

网络体系结构是**分层结构** 

> 优点：
>
> 1. 协议间调用关系明确
> 2. 模块化的分层易于系统更新，维护（某个层次服务实现的改变对于其他层次是透明的）
>
> 缺点：
>
> 1. 不是所有协议关系都能归结为两层之间，偶尔会出现隔层调用或者下层调用上层
>
> 2. 层数太多：降低效率。
> 3. 冗余较低层功能

* 实体：任何可发送或接收信息的硬件或软件进程

* 协议：控制**两个对等实体**进行通信的规则的集合，协议是**“水平的”**

* 接口：位于每对相邻层之间，定义了下层向上层提供服务的原语操作和服务

* 上一层实体需要使用**下层提供的服务**，遵循本层协议，实现本层功能，向**上层**提供服务，服务是**“垂直”**的

* 下层协议的实现对上层的服务用户是**透明**的

> 此透明非彼透明，此处透明指不可见之意,上层不知道也不关心下层如何实现的服务

* 同系统的相邻层实体之间通过**接口**进行交互，通过**服务访问点SAP**，交换**原语**，指定请求的特定服务。

<img src=".\笔记图片\分层网络体系结构概念.jpg" style="zoom:80%;" />

## OSI 参考模型

<img src=".\笔记图片\OSI参考模型.jpg" style="zoom:80%;" />

<img src=".\笔记图片\OSI参考模型解释通信过程.jpg" style="zoom:80%;" />

> 为什么需要数据封装（加头）？
>
> 增加控制信息(地址，差错检测码，协议控制)

各层功能：详见《自顶向下》p34

## 五层参考模型 

五层模型中，路由器比交换机多一个网络层。

<img src=".\笔记图片\五层参考模型.jpg" style="zoom:80%;" />
